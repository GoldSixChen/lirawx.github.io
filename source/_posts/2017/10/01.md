---
layout: post
tags: centos lamp cms
title: 记阿里云上线php项目
date: 2017-10-01 10:01:22

---

## 搭建环境
阿里云ESC
2G 4M
centos 7

## 搭建lamp
这里使用脚本编译安装

 安装LNMP执行：
```
 wget -c http://soft.vpser.net/lnmp/lnmp1.3-full.tar.gz && tar zxf lnmp1.3-full.tar.gz && cd lnmp1.3-full && ./install.sh lamp
```
默认安装lnmp可不写，如需要安装LNMPA或LAMP，将./install.sh 后面的参数替换为lnmpa或lnmp即可。

## 安装选项

因项目需要其中安装选项:
- 1.设置mysql密码
- 2. 安装InnoDB 最好安装
- 3.Mysql 版本选择5.6
- 4.php选择5.6.22
- 5.Memory Allocator,我没有安装
- 6.Administrator Email 选填
- 7.apache 选2.2

然后脚本会自动运行.

## 运行结果
如果显示 Nginx: OK，MySQL: OK，PHP: OK
那么就成功了.最后脚本默认会修改防火墙,我这边貌似会有问题.我自己把它的删掉了,替换成我自己的.

## /etc/sysconfig/iptables
如下
```
:INPUT DROP [5:1411]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [72:10550]
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 3306 -j ACCEPT
-A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT
-A INPUT -m state --state ESTABLISHED -j ACCEPT
-A INPUT -p tcp -m tcp --dport 6379 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 3690 -j ACCEPT

```

## 最后的最后
这个最重要的一步,我就是这一步没有重视,导致我重新装了一遍.头的大了.
>
1.项目需要安装一些php拓展
2. 将目录权限改为www
chown www:www -R /path/to/dir 对网站目录进行权限设置
