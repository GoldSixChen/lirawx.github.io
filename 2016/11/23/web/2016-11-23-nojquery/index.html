<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="let life = undefined;">
  <meta name="keyword" content="just coding.">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      NO Jquery | DVRAW.
    
  </title>
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/gitment.css">
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>
  <script src="/js/qrious.js"></script>
<script src="/js/gitment.js"></script>
</head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>DVRAW.</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>NO Jquery</h2>
  <p class="post-date">2016-11-23</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body">
  <article class="post-article">
    <section class="markdown-content"><h2 id="JavaScript-Functions-and-Helpers"><a href="#JavaScript-Functions-and-Helpers" class="headerlink" title="JavaScript Functions and Helpers"></a>JavaScript Functions and Helpers</h2><p>Vanilla JS utilities for writing powerful web applications without jQuery.<br><a id="more"></a></p>
<h3 id="Selecting"><a href="#Selecting" class="headerlink" title="Selecting"></a>Selecting</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">// select all div tags + link tags with the class &quot;info&quot;</div><div class="line">var matches = document.querySelectorAll(&quot;div, a.info&quot;);</div><div class="line"></div><div class="line">// select all text input fields</div><div class="line">var matches = document.querySelectorAll(&quot;input[type=&apos;text&apos;]&quot;);</div><div class="line"></div><div class="line">var match = document.querySelector(&apos;div.foo&apos;);</div><div class="line"></div><div class="line">// equals for the matched element</div><div class="line">var match = document.querySelectorAll(&apos;div.foo&apos;)[0];</div><div class="line"></div><div class="line">// select a list of matching elements, context is optional</div><div class="line">function $(selector, context) &#123;</div><div class="line">    return (context || document).querySelectorAll(selector);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// select the first match only, context is optional</div><div class="line">function $1(selector, context) &#123;</div><div class="line">    return (context || document).querySelector(selector);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">// how to use</div><div class="line"></div><div class="line">// select all &apos;.bar&apos; elements inside all &apos;.foo&apos; containers</div><div class="line">var matches = $(&apos;.foo .bar&apos;);</div><div class="line"></div><div class="line">// context example</div><div class="line">var container = $1(&apos;.foo&apos;);</div><div class="line">// select &apos;.bar&apos; elements inside this one container</div><div class="line">var matches = $(&apos;.bar&apos;, container);</div></pre></td></tr></table></figure>
<p>var list = document.getElementsByClassName(‘foo’);</p>
<p>var list = document.getElementsByTagName(‘a’);</p>
<p>var el = document.getElementById(‘foo’);</p>
<h3 id="Traversing"><a href="#Traversing" class="headerlink" title="Traversing"></a>Traversing</h3><h4 id="Match-element-selector"><a href="#Match-element-selector" class="headerlink" title="Match element selector"></a>Match element selector</h4><p>Check the current elements against a CSS selector.</p>
<p>To check whether a given element matches a CSS selector, modern browsers support the matches() or matchesSelector() DOM method. Here’s a polyfill for other browsers:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// matches polyfill</div><div class="line">this.Element &amp;&amp; function(ElementPrototype) &#123;</div><div class="line">    ElementPrototype.matches = ElementPrototype.matches ||</div><div class="line">    ElementPrototype.matchesSelector ||</div><div class="line">    ElementPrototype.webkitMatchesSelector ||</div><div class="line">    ElementPrototype.msMatchesSelector ||</div><div class="line">    function(selector) &#123;</div><div class="line">        var node = this, nodes = (node.parentNode || node.document).querySelectorAll(selector), i = -1;</div><div class="line">        while (nodes[++i] &amp;&amp; nodes[i] != node);</div><div class="line">        return !!nodes[i];</div><div class="line">    &#125;</div><div class="line">&#125;(Element.prototype);</div></pre></td></tr></table></figure>
<p>Now you can call matches() on any DOM element:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var el = document.querySelector(&apos;span&apos;);</div><div class="line">console.log(el.matches(&apos;.foo&apos;));</div></pre></td></tr></table></figure>
<h4 id="Get-parent-element-node"><a href="#Get-parent-element-node" class="headerlink" title="Get parent element node"></a>Get parent element node</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var el = document.querySelector(&apos;div&apos;);</div><div class="line">var parent = el.parentNode;</div></pre></td></tr></table></figure>
<h4 id="Select-the-children-of-an-element"><a href="#Select-the-children-of-an-element" class="headerlink" title="Select the children of an element"></a>Select the children of an element</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var el = document.querySelector(&apos;div&apos;);</div><div class="line"></div><div class="line">var children = el.childNodes,</div><div class="line">    number_of_children = children.length;</div><div class="line"></div><div class="line">for (var i=0; i&lt;number_of_children; i++)</div><div class="line">    console.log(children[i].innerHTML);</div></pre></td></tr></table></figure>
<h3 id="Manipulation"><a href="#Manipulation" class="headerlink" title="Manipulation"></a>Manipulation</h3><h4 id="Create-a-DOM-element"><a href="#Create-a-DOM-element" class="headerlink" title="Create a DOM element"></a>Create a DOM element</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var el = document.createElement(&apos;div&apos;);</div><div class="line">el.innerHTML = &apos;&lt;p&gt;Hello World!&lt;/p&gt;&apos;;</div><div class="line">var textnode = document.createTextNode(&apos;Hello World!&apos;);</div><div class="line">el.appendChild(textnode);</div><div class="line">document.body.appendChild(el);</div></pre></td></tr></table></figure>
<h4 id="Replace-a-DOM-element"><a href="#Replace-a-DOM-element" class="headerlink" title="Replace a DOM element"></a>Replace a DOM element</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// select the element that will be replaced</div><div class="line">var el = document.querySelector(&apos;div&apos;);</div><div class="line"></div><div class="line">// &lt;a href=&quot;/javascript/manipulation/creating-a-dom-element-51/&quot;&gt;create a new element&lt;/a&gt; that will take the place of &quot;el&quot;</div><div class="line">var newEl = document.createElement(&apos;p&apos;);</div><div class="line">newEl.innerHTML = &apos;&lt;b&gt;Hello World!&lt;/b&gt;&apos;;</div><div class="line"></div><div class="line">// replace el with newEL</div><div class="line">el.parentNode.replaceChild(newEl, el);</div></pre></td></tr></table></figure>
<h4 id="Removing-an-element"><a href="#Removing-an-element" class="headerlink" title="Removing an element"></a>Removing an element</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var el = document.querySelector(&apos;div&apos;);</div><div class="line">el.parentNode.removeChild(el);</div></pre></td></tr></table></figure>
<p>Iterating over a list of selected elements</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">var divs = document.querySelectorAll(&apos;div&apos;), len = divs.length;</div><div class="line"></div><div class="line">for (var i=0; i&lt;len; i++) &#123;</div><div class="line">    divs[i].style.color = &quot;green&quot;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">Finally, you can use this little trick, that is similar to jQuery&apos;s $.each() method:</div><div class="line"></div><div class="line">var divs = document.querySelectorAll(&apos;div&apos;);</div><div class="line"></div><div class="line">[].forEach.call(divs, function(item) &#123;</div><div class="line">    item.style.color = &quot;green&quot;;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="Attributes"><a href="#Attributes" class="headerlink" title="Attributes"></a>Attributes</h3><h4 id="Adding-removing-and-testing-for-classes"><a href="#Adding-removing-and-testing-for-classes" class="headerlink" title="Adding, removing, and testing for classes"></a>Adding, removing, and testing for classes</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">function hasClass(el, className) &#123;</div><div class="line">    return el.classList ? el.classList.contains(className) : new RegExp(&apos;\\b&apos;+ className+&apos;\\b&apos;).test(el.className);</div><div class="line">&#125;</div><div class="line"></div><div class="line">function addClass(el, className) &#123;</div><div class="line">    if (el.classList) el.classList.add(className);</div><div class="line">    else if (!hasClass(el, className)) el.className += &apos; &apos; + className;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function removeClass(el, className) &#123;</div><div class="line">    if (el.classList) el.classList.remove(className);</div><div class="line">    else el.className = el.className.replace(new RegExp(&apos;\\b&apos;+ className+&apos;\\b&apos;, &apos;g&apos;), &apos;&apos;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Setting-getting-and-removing-data-attributes"><a href="#Setting-getting-and-removing-data-attributes" class="headerlink" title="Setting, getting, and removing data attributes"></a>Setting, getting, and removing data attributes</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var el = document.querySelector(&apos;div&apos;);</div><div class="line">el.setAttribute(&apos;data-foo&apos;, &apos;Hello World!&apos;);</div><div class="line"></div><div class="line">var el = document.querySelector(&apos;img&apos;);</div><div class="line">console.log(el.getAttribute(&apos;data-foo&apos;));</div><div class="line"></div><div class="line">el.removeAttribute(&apos;data-foo&apos;);</div></pre></td></tr></table></figure>
<h4 id="Getting-setting-and-removing-attributes"><a href="#Getting-setting-and-removing-attributes" class="headerlink" title="Getting, setting, and removing attributes"></a>Getting, setting, and removing attributes</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">// set the alt attribute of an element</div><div class="line">var el = document.querySelector(&apos;img&apos;);</div><div class="line">el.setAttribute(&apos;alt&apos;, &apos;Hello World!&apos;);</div><div class="line">el.removeAttribute(&apos;alt&apos;);v</div></pre></td></tr></table></figure>
<h4 id="toggle"><a href="#toggle" class="headerlink" title="toggle"></a>toggle</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">function toggle(el) &#123;</div><div class="line">    hasClass(el, &apos;is_hidden&apos;) ? removeClass(el, &apos;is_hidden&apos;) : addClass(el, &apos;is_hidden&apos;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Styles"><a href="#Styles" class="headerlink" title="Styles"></a>Styles</h3><h4 id="Set-and-get-CSS-styles-of-elements"><a href="#Set-and-get-CSS-styles-of-elements" class="headerlink" title="Set and get CSS styles of elements"></a>Set and get CSS styles of elements</h4><p>The getComputedStyle() method (IE &lt; 9: currentStyle property) corresponds to the rendered on-page style of an element after all stylesheets were applied. It can be accessed as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">  var el = document.querySelector(&apos;div&apos;);</div><div class="line"></div><div class="line">// getComputedStyle for modern browsers, currentStyle for IE</div><div class="line">var style = window.getComputedStyle ? getComputedStyle(el, null) : el.currentStyle;</div><div class="line"></div><div class="line">// reading properties</div><div class="line">console.log(el.backgroundColor);</div><div class="line"></div><div class="line">// reading properties containing hyphens</div><div class="line">console.log(el[&apos;-webkit-text-size-adjust&apos;]);</div><div class="line"></div><div class="line"></div><div class="line">var el = document.querySelector(&apos;div&apos;);</div><div class="line"></div><div class="line">el.style.backgroundColor = &apos;green&apos;;</div><div class="line">el.style.display = &apos;none&apos;;</div><div class="line">el.style[&apos;border-radius&apos;] = &apos;5px&apos;;</div></pre></td></tr></table></figure>
<p>Multiple styles can be set at once by use of the cssText property:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">el.style.cssText += &apos;background: green, display: none;&apos;;</div></pre></td></tr></table></figure>
<p>However, this method is rather slow and therefore it’s better to use instead a little helper for setting multiple styles by an object of key/value pairs:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function css(el, styles) &#123;</div><div class="line">    for (var property in styles)</div><div class="line">        el.style[property] = styles[property];</div><div class="line">&#125;</div><div class="line"></div><div class="line">// example</div><div class="line">var el = document.querySelector(&apos;div&apos;);</div><div class="line">css(el, &#123; background: &apos;green&apos;, display: &apos;none&apos;, &apos;border-radius&apos;: &apos;5px&apos; &#125;);</div></pre></td></tr></table></figure>
<h4 id="Get-and-set-scroll-position-of-an-element"><a href="#Get-and-set-scroll-position-of-an-element" class="headerlink" title="Get and set scroll position of an element"></a>Get and set scroll position of an element</h4><p>Getting the scroll position of the document in px.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,</div><div class="line">    scrollTop = window.pageYOffset || document.documentElement.scrollTop;</div></pre></td></tr></table></figure>
<p>Setting the document scroll position of the document in px:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">document.documentElement.scrollTop = document.body.scrollTop = 1000;</div><div class="line">document.documentElement.scrollLeft = document.body.scrollLeft = 500;</div></pre></td></tr></table></figure>
<h3 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h3><h4 id="JSONP-Ajax-requests"><a href="#JSONP-Ajax-requests" class="headerlink" title="JSONP Ajax requests"></a>JSONP Ajax requests</h4><p>JSONP allows asynchronous loading of data, even from servers in a different domain.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// define a callback function, which accepts the returned JSON data as its only argument</div><div class="line">function response(data) &#123;</div><div class="line">    // JSON data in form of a JavaScript object</div><div class="line">    console.log(data);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// create a script tag with the external request URL</div><div class="line">// include &quot;response&quot; as value of the GET param &quot;callback&quot; in the URL</div><div class="line">var script = document.createElement(&apos;script&apos;);</div><div class="line">script.src = &apos;https://foo.bar/api/?callback=response&apos;;</div><div class="line">document.body.appendChild(script);</div></pre></td></tr></table></figure>
<h4 id="Load-a-script-file-asynchronously"><a href="#Load-a-script-file-asynchronously" class="headerlink" title="Load a script file asynchronously"></a>Load a script file asynchronously</h4><p>How to load a JavaScript file asynchronously from the server and automatically execute it.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var script = document.createElement(&apos;script&apos;),</div><div class="line">    scripts = document.getElementsByTagName(&apos;script&apos;)[0];</div><div class="line">script.src = url;</div><div class="line">scripts.parentNode.insertBefore(script, scripts);</div></pre></td></tr></table></figure>
<p>it’s recommended to use a standard script tag with the async (and defer) attribute included:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">//&lt;script src=&quot;https://platform.twitter.com/widgets.js&quot; async defer&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
<h4 id="Send-Ajax-GET-and-POST-requests"><a href="#Send-Ajax-GET-and-POST-requests" class="headerlink" title="Send Ajax GET and POST requests"></a>Send Ajax GET and POST requests</h4><p>The following helper function allows sending an Ajax request via GET method - an equivalent to jQuery’s $.get(). Its url argument must contain the full request path including all GET parameters:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">function getAjax(url, success) &#123;</div><div class="line">    var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(&apos;Microsoft.XMLHTTP&apos;);</div><div class="line">    xhr.open(&apos;GET&apos;, url);</div><div class="line">    xhr.onreadystatechange = function() &#123;</div><div class="line">        if (xhr.readyState&gt;3 &amp;&amp; xhr.status==200) success(xhr.responseText);</div><div class="line">    &#125;;</div><div class="line">    xhr.setRequestHeader(&apos;X-Requested-With&apos;, &apos;XMLHttpRequest&apos;);</div><div class="line">    xhr.send();</div><div class="line">    return xhr;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// example request</div><div class="line">getAjax(&apos;http://foo.bar/?p1=1&amp;p2=Hello+World&apos;, function(data)&#123; console.log(data); &#125;);</div></pre></td></tr></table></figure>
<p>If the server returns a JSON string, it needs to be parsed inside the callback function ($.getJSON in jQuery):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">getAjax(&apos;http://foo.bar/?p1=1&amp;p2=Hello+World&apos;, function(data)&#123;</div><div class="line">    var json = JSON.parse(data);</div><div class="line">    console.log(json);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>Sending POST requests is quite similar ($.post() in jQuery). However, there are lots of options available - more than can be covered in one post. Here’s a useful helper function to get you started:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">function postAjax(url, data, success) &#123;</div><div class="line">    var params = typeof data == &apos;string&apos; ? data : Object.keys(data).map(</div><div class="line">            function(k)&#123; return encodeURIComponent(k) + &apos;=&apos; + encodeURIComponent(data[k]) &#125;</div><div class="line">        ).join(&apos;&amp;&apos;);</div><div class="line"></div><div class="line">    var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</div><div class="line">    xhr.open(&apos;POST&apos;, url);</div><div class="line">    xhr.onreadystatechange = function() &#123;</div><div class="line">        if (xhr.readyState&gt;3 &amp;&amp; xhr.status==200) &#123; success(xhr.responseText); &#125;</div><div class="line">    &#125;;</div><div class="line">    xhr.setRequestHeader(&apos;X-Requested-With&apos;, &apos;XMLHttpRequest&apos;);</div><div class="line">    xhr.setRequestHeader(&apos;Content-Type&apos;, &apos;application/x-www-form-urlencoded&apos;);</div><div class="line">    xhr.send(params);</div><div class="line">    return xhr;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// example request</div><div class="line">postAjax(&apos;http://foo.bar/&apos;, &apos;p1=1&amp;p2=Hello+World&apos;, function(data)&#123; console.log(data); &#125;);</div><div class="line"></div><div class="line">// example request with data object</div><div class="line">postAjax(&apos;http://foo.bar/&apos;, &#123; p1: 1, p2: &apos;Hello World&apos; &#125;, function(data)&#123; console.log(data); &#125;);</div></pre></td></tr></table></figure>
<h4 id="Serialize-form-data-into-an-array"><a href="#Serialize-form-data-into-an-array" class="headerlink" title="Serialize form data into an array"></a>Serialize form data into an array</h4><p>Encode a set of form elements as an array of names and values.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">function serializeArray(form) &#123;</div><div class="line">    var field, l, s = [];</div><div class="line">    if (typeof form == &apos;object&apos; &amp;&amp; form.nodeName == &quot;FORM&quot;) &#123;</div><div class="line">        var len = form.elements.length;</div><div class="line">        for (i=0; i&lt;len; i++) &#123;</div><div class="line">            field = form.elements[i];</div><div class="line">            if (field.name &amp;&amp; !field.disabled &amp;&amp; field.type != &apos;file&apos; &amp;&amp; field.type != &apos;reset&apos; &amp;&amp; field.type != &apos;submit&apos; &amp;&amp; field.type != &apos;button&apos;) &#123;</div><div class="line">                if (field.type == &apos;select-multiple&apos;) &#123;</div><div class="line">                    l = form.elements[i].options.length;</div><div class="line">                    for (j=0; j&lt;l; j++) &#123;</div><div class="line">                        if(field.options[j].selected)</div><div class="line">                            s[s.length] = &#123; name: field.name, value: field.options[j].value &#125;;</div><div class="line">                    &#125;</div><div class="line">                &#125; else if ((field.type != &apos;checkbox&apos; &amp;&amp; field.type != &apos;radio&apos;) || field.checked) &#123;</div><div class="line">                    s[s.length] = &#123; name: field.name, value: field.value &#125;;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return s;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Serialize-form-data-into-a-query-string"><a href="#Serialize-form-data-into-a-query-string" class="headerlink" title="Serialize form data into a query string"></a>Serialize form data into a query string</h4><p>Encode a set of form elements as a string for submission.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">function serialize(form) &#123;</div><div class="line">    var field, l, s = [];</div><div class="line">    if (typeof form == &apos;object&apos; &amp;&amp; form.nodeName == &quot;FORM&quot;) &#123;</div><div class="line">        var len = form.elements.length;</div><div class="line">        for (var i=0; i&lt;len; i++) &#123;</div><div class="line">            field = form.elements[i];</div><div class="line">            if (field.name &amp;&amp; !field.disabled &amp;&amp; field.type != &apos;file&apos; &amp;&amp; field.type != &apos;reset&apos; &amp;&amp; field.type != &apos;submit&apos; &amp;&amp; field.type != &apos;button&apos;) &#123;</div><div class="line">                if (field.type == &apos;select-multiple&apos;) &#123;</div><div class="line">                    l = form.elements[i].options.length;</div><div class="line">                    for (var j=0; j&lt;l; j++) &#123;</div><div class="line">                        if(field.options[j].selected)</div><div class="line">                            s[s.length] = encodeURIComponent(field.name) + &quot;=&quot; + encodeURIComponent(field.options[j].value);</div><div class="line">                    &#125;</div><div class="line">                &#125; else if ((field.type != &apos;checkbox&apos; &amp;&amp; field.type != &apos;radio&apos;) || field.checked) &#123;</div><div class="line">                    s[s.length] = encodeURIComponent(field.name) + &quot;=&quot; + encodeURIComponent(field.value);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return s.join(&apos;&amp;&apos;).replace(/%20/g, &apos;+&apos;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h3><h4 id="Preventing-the-default-action-or-bubbling-of-events"><a href="#Preventing-the-default-action-or-bubbling-of-events" class="headerlink" title="Preventing the default action or bubbling of events"></a>Preventing the default action or bubbling of events</h4><p>How to cancel an event or preventing it from bubbling up the DOM tree.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">function handler(e) &#123;</div><div class="line">    // stop the immediate action of this event</div><div class="line">    e.preventDefault();</div><div class="line"></div><div class="line">    // prevent the event fro bubbling up</div><div class="line">    e.stopPropagation();</div><div class="line">&#125;</div><div class="line"></div><div class="line">// attach handler to the keydown event of the document</div><div class="line">if (document.attachEvent) document.attachEvent(&apos;onkeydown&apos;, handler);</div><div class="line">else document.addEventListener(&apos;keydown&apos;, handler);</div></pre></td></tr></table></figure>
<h4 id="Getting-the-keycode-from-keyboard-events"><a href="#Getting-the-keycode-from-keyboard-events" class="headerlink" title="Getting the keycode from keyboard events"></a>Getting the keycode from keyboard events</h4><p>Binding an event handler to keyboard actions and retrieving the keycode that triggered the event.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// event handler function</div><div class="line">function handler(e) &#123;</div><div class="line">    var key = window.event ? e.keyCode : e.which;</div><div class="line">    console.log(key, e.shiftKey, e.altKey, e.ctrlKey);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// attach handler to the keydown event of the document</div><div class="line">if (document.attachEvent) document.attachEvent(&apos;onkeydown&apos;, handler);</div><div class="line">else document.addEventListener(&apos;keydown&apos;, handler);</div></pre></td></tr></table></figure>
<h4 id="Getting-the-current-mouse-position"><a href="#Getting-the-current-mouse-position" class="headerlink" title="Getting the current mouse position"></a>Getting the current mouse position</h4><p>How to get the current mouse position on mouse move or click.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// event handler function</div><div class="line">function handler(e) &#123;</div><div class="line">    e = e || window.event;</div><div class="line"></div><div class="line">    var pageX = e.pageX;</div><div class="line">    var pageY = e.pageY;</div><div class="line"></div><div class="line">    // IE 8</div><div class="line">    if (pageX === undefined) &#123;</div><div class="line">        pageX = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;</div><div class="line">        pageY = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    console.log(pageX, pageY);</div><div class="line">&#125;</div><div class="line"></div><div class="line">// attach handler to the click event of the document</div><div class="line">if (document.attachEvent) document.attachEvent(&apos;onclick&apos;, handler);</div><div class="line">else document.addEventListener(&apos;click&apos;, handler);</div></pre></td></tr></table></figure>
<h4 id="Running-code-when-the-document-is-ready"><a href="#Running-code-when-the-document-is-ready" class="headerlink" title="Running code when the document is ready"></a>Running code when the document is ready</h4><p>A page can’t be manipulated safely until the document is “ready.” Here’s how to make sure code isn’t run prematurely.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function run() &#123;</div><div class="line">    // do something</div><div class="line">&#125;</div><div class="line"></div><div class="line">// in case the document is already rendered</div><div class="line">if (document.readyState!=&apos;loading&apos;) run();</div><div class="line">// modern browsers</div><div class="line">else if (document.addEventListener) document.addEventListener(&apos;DOMContentLoaded&apos;, run);</div><div class="line">// IE &lt;= 8</div><div class="line">else document.attachEvent(&apos;onreadystatechange&apos;, function()&#123;</div><div class="line">    if (document.readyState==&apos;complete&apos;) run();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h4 id="Trigger-an-event"><a href="#Trigger-an-event" class="headerlink" title="Trigger an event"></a>Trigger an event</h4><p>How to create and dispatch events. Corresponding functions to jQuery’s $.trigger(), $.click(), $.blur(), $.keyup(), $.mousedown(), etc.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">There are a few convenient methods for triggering an event on specific elements:</div><div class="line"></div><div class="line">var el = document.querySelector(&apos;input[type=&quot;text&quot;]&apos;);</div><div class="line"></div><div class="line">// for any element</div><div class="line">el.click();</div><div class="line"></div><div class="line">// for inputs and textareas</div><div class="line">el.focus();</div><div class="line">el.blur();</div><div class="line"></div><div class="line">// for form elements</div><div class="line">var my_form = document.querySelector(&apos;form&apos;);</div><div class="line"></div><div class="line">my_form.submit();</div><div class="line">my_form.reset();</div></pre></td></tr></table></figure>
<p>If you need to trigger other events, such as mousedown or keyup, use the following helper function:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">function triggerEvent(el, type)&#123;</div><div class="line">   if (&apos;createEvent&apos; in document) &#123;</div><div class="line">        // modern browsers, IE9+</div><div class="line">        var e = document.createEvent(&apos;HTMLEvents&apos;);</div><div class="line">        e.initEvent(type, false, true);</div><div class="line">        el.dispatchEvent(e);</div><div class="line">    &#125; else &#123;</div><div class="line">        // IE 8</div><div class="line">        var e = document.createEventObject();</div><div class="line">        e.eventType = type;</div><div class="line">        el.fireEvent(&apos;on&apos;+e.eventType, e);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Usage example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var el = document.querySelector(&apos;input[type=&quot;text&quot;]&apos;);</div><div class="line">triggerEvent(el, &apos;mousedown&apos;);</div></pre></td></tr></table></figure>
<h3 id="Effects"><a href="#Effects" class="headerlink" title="Effects"></a>Effects</h3><h4 id="Animate-an-element-property"><a href="#Animate-an-element-property" class="headerlink" title="Animate an element property"></a>Animate an element property</h4><p>How to do animations, such as fading, sliding, or just toggling visibility with JS and CSS3.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Animations in JavaScript aren&apos;t difficult to accomplish. As an example, two functions that behave similar to jQuery&apos;s $.fadeIn() and $.fadeOut():</div><div class="line"></div><div class="line">// fade an element from the current state to full opacity in &quot;duration&quot; ms</div><div class="line">function fadeOut(el, duration) &#123;</div><div class="line">    var s = el.style, step = 25/(duration || 300);</div><div class="line">    s.opacity = s.opacity || 1;</div><div class="line">    (function fade() &#123; (s.opacity -= step) &lt; 0 ? s.display = &quot;none&quot; : setTimeout(fade, 25); &#125;)();</div><div class="line">&#125;</div><div class="line"></div><div class="line">// fade out an element from the current state to full transparency in &quot;duration&quot; ms</div><div class="line">// display is the display style the element is assigned after the animation is done</div><div class="line">function fadeIn(el, duration, display) &#123;</div><div class="line">    var s = el.style, step = 25/(duration || 300);</div><div class="line">    s.opacity = s.opacity || 0;</div><div class="line">    s.display = display || &quot;block&quot;;</div><div class="line">    (function fade() &#123; (s.opacity = parseFloat(s.opacity)+step) &gt; 1 ? s.opacity = 1 : setTimeout(fade, 25); &#125;)();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Hide-or-show-an-element"><a href="#Hide-or-show-an-element" class="headerlink" title="Hide or show an element"></a>Hide or show an element</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">function hide(el) &#123;</div><div class="line">    el.style.display = &apos;none&apos;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function show(el, value) &#123;</div><div class="line">    el.style.display = value;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function toggle(el, value) &#123;</div><div class="line">    var display = (window.getComputedStyle ? getComputedStyle(el, null) : el.currentStyle).display;</div><div class="line">    if (display == &apos;none&apos;) el.style.display = value;</div><div class="line">    else el.style.display = &apos;none&apos;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>toogle() can be used to switch between visible and invisible. If you don’t want to or cannot pass in the target display value manually, it gets more complicated. The following helpers are basically vanilla JavaScript clones of jQuery’s $.show() and $.hide().</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">// get the default display style of an element</div><div class="line">function defaultDisplay(tag) &#123;</div><div class="line">    var iframe = document.createElement(&apos;iframe&apos;);</div><div class="line">    iframe.setAttribute(&apos;frameborder&apos;, 0);</div><div class="line">    iframe.setAttribute(&apos;width&apos;, 0);</div><div class="line">    iframe.setAttribute(&apos;height&apos;, 0);</div><div class="line">    document.documentElement.appendChild(iframe);</div><div class="line"></div><div class="line">    var doc = (iframe.contentWindow || iframe.contentDocument).document;</div><div class="line"></div><div class="line">    // IE support</div><div class="line">    doc.write();</div><div class="line">    doc.close();</div><div class="line"></div><div class="line">    var testEl = doc.createElement(tag);</div><div class="line">    doc.documentElement.appendChild(testEl);</div><div class="line">    var display = (window.getComputedStyle ? getComputedStyle(testEl, null) : testEl.currentStyle).display</div><div class="line">    iframe.parentNode.removeChild(iframe);</div><div class="line">    return display;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// actual show/hide function used by show() and hide() below</div><div class="line">function showHide(el, show) &#123;</div><div class="line">    var value = el.getAttribute(&apos;data-olddisplay&apos;),</div><div class="line">    display = el.style.display,</div><div class="line">    computedDisplay = (window.getComputedStyle ? getComputedStyle(el, null) : el.currentStyle).display;</div><div class="line"></div><div class="line">    if (show) &#123;</div><div class="line">         if (!value &amp;&amp; display === &apos;none&apos;) el.style.display = &apos;&apos;;</div><div class="line">         if (el.style.display === &apos;&apos; &amp;&amp; (computedDisplay === &apos;none&apos;)) value = value || defaultDisplay(el.nodeName);</div><div class="line">    &#125; else &#123;</div><div class="line">        if (display &amp;&amp; display !== &apos;none&apos; || !(computedDisplay == &apos;none&apos;))</div><div class="line">            el.setAttribute(&apos;data-olddisplay&apos;, (computedDisplay == &apos;none&apos;) ? display : computedDisplay);</div><div class="line">    &#125;</div><div class="line">    if (!show || el.style.display === &apos;none&apos; || el.style.display === &apos;&apos;)</div><div class="line">        el.style.display = show ? value || &apos;&apos; : &apos;none&apos;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// helper functions</div><div class="line">function show(el) &#123; showHide(el, true); &#125;</div><div class="line">function hide(el) &#123; showHide(el); &#125;</div></pre></td></tr></table></figure>
<h3 id="Utilities"><a href="#Utilities" class="headerlink" title="Utilities"></a>Utilities</h3><h4 id="Parsing-a-JSON-string"><a href="#Parsing-a-JSON-string" class="headerlink" title="Parsing a JSON string"></a>Parsing a JSON string</h4><p>Takes a well-formed JSON string and returns the resulting JavaScript value.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var json = &apos;&#123; &quot;foo&quot;: true, &quot;bar&quot;: 1 &#125;&apos;,</div><div class="line">    obj = JSON.parse(json);</div><div class="line"></div><div class="line">console.log(obj);</div></pre></td></tr></table></figure>
<p>Strip leading and trailing white-space from string</p>
<p>Remove white-space characters from the beginning and end of a string.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  // IE 8</div><div class="line">if (!String.prototype.trim) &#123;</div><div class="line">    String.prototype.trim = function()&#123; return this.replace(/^\s+|\s+$/g, &apos;&apos;); &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// example</div><div class="line">var s = &apos;  Hello World!  &apos;;</div><div class="line">s = s.trim();</div><div class="line">console.log(s);</div><div class="line">// &quot;Hello World!&quot;</div></pre></td></tr></table></figure>
<h4 id="Set-cookie-get-cookie-and-delete-cookie"><a href="#Set-cookie-get-cookie-and-delete-cookie" class="headerlink" title="Set cookie, get cookie and delete cookie"></a>Set cookie, get cookie and delete cookie</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">function getCookie(name) &#123;</div><div class="line">    var v = document.cookie.match(&apos;(^|;) ?&apos; + name + &apos;=([^;]*)(;|$)&apos;);</div><div class="line">    return v ? v[2] : null;</div><div class="line">&#125;</div><div class="line">function setCookie(name, value, days) &#123;</div><div class="line">    var d = new Date;</div><div class="line">    d.setTime(d.getTime() + 24*60*60*1000*days);</div><div class="line">    document.cookie = name + &quot;=&quot; + value + &quot;;path=/;expires=&quot; + d.toGMTString();</div><div class="line">&#125;</div><div class="line">function deleteCookie(name) &#123; setCookie(name, &apos;&apos;, -1); &#125;</div></pre></td></tr></table></figure>
</section>
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#前端 javascript jquery" >
    <span class="tag-code">前端 javascript jquery</span>
  </a>

      </div>
    
    <!--
    <div class="money-like">
      <div class="reward-btn">
        赏
        <span class="money-code">
          <span class="alipay-code">
            <div class="code-image"></div>
            <b>使用支付宝打赏</b>
          </span>
          <span class="wechat-code">
            <div class="code-image"></div>
            <b>使用微信打赏</b>
          </span>
        </span>
      </div>
      <p class="notice">若你觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏</p>
    </div>
     -->
    <div class="qrcode">
      <canvas id="share-qrcode"></canvas>
      <p class="notice">扫描二维码，分享此文章</p>
    </div>
    
      <div id="comments"></div>
    
  </article>
</main>

<script>
  (function () {
    var url = 'https://lirawx.me/2016/11/23/web/2016-11-23-nojquery/';
    var banner = 'undefined'
    if (banner !== 'undefined') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

     // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      var imageW = $(this).width()
      var imageH = $(this).height()

      var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
      zoom = zoom < 1 ? 1 : zoom
      zoom = zoom > 2 ? 2 : zoom
      var transY = (($(window).height() - imageH) / 2).toFixed(2)

      $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
      $('.image-view-wrap').addClass('wrap-active')
      $('.image-view-wrap img').css({
        'width': `${imageW}`,
        'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
      })
      $('html').css('overflow', 'hidden')

      $('.image-view-wrap').on('click', function() {
        $(this).remove()
        $('html').attr('style', '')
      })
    })

    // qrcode
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });

    // gitment
    var gitmentConfig = "lirawx";
    if (gitmentConfig != "undefined") {
      var gitment = new Gitment({
        id: "NO Jquery",
        owner: "lirawx",
        repo: "blog",
        oauth: {
          client_id: "fbf58e21712e09b5f132",
          client_secret: "ef1956862ff59fd6674c89519b74ee6d934b9b56"
        },
        theme: {
          render(state, instance) {
            const container = document.createElement('div')
            container.lang = "en-US"
            container.className = 'gitment-container gitment-root-container'
            container.appendChild(instance.renderHeader(state, instance))
            container.appendChild(instance.renderEditor(state, instance))
            container.appendChild(instance.renderComments(state, instance))
            container.appendChild(instance.renderFooter(state, instance))
            return container;
          }
        }
      })
      gitment.render(document.getElementById('comments'))
    }
  })();
</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2017 lirawx. <br> Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    |
    Theme by <a href="https://github.com/yanm1ng">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine == 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->

<script>
    var _baId = '9d96dd222ca2ed3fec333e0f5fa70590';
    // Originial
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?" + _baId;
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>


<!-- GA part-->

<script>
  var UID = 'UA-80549073-1';
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', UID, 'auto');
  ga('send', 'pageview');

</script>


<script src="/js/script.js"></script>

  </body>
</html>